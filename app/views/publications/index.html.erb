<h1>Lista de Publicaciones</h1>

<table>
  <thead>
    <tr>
      <th>Título</th>
      <th>Descripción</th>
      <th>Fecha de creación</th>
      <th>Creado por</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @publications.each do |publication| %>
      <tr>
        <td><%= publication.title %></td>
        <td><%= publication.description %></td>
        <td><%= publication.publication_date.strftime("%d/%m/%y: %H:%M:%S") %></td>
        <td><%= publication.created_by %></td>
        <td><%= link_to 'Mostrar', publication %></td>
        <td><%= if (publication.created_by == current_user.email) || current_user.administrator?
                  link_to 'Editar', edit_publication_path(publication)
                end %></td>
        <td><%= if (publication.created_by == current_user.email) || current_user.administrator?
                  link_to 'Eliminar', publication, method: :delete, data: { confirm: '¿Estás seguro?' }
                end %></td>
        <td><%= link_to like_publication_path(publication), class: "like", method: :put do %>
              <button type="button" class="btn btn-info" aria-label="Left Align">
                <span class="glyphicon glyphicon-thumbs-up glyphicon-align-center" aria-hidden="true"></span>
                <span class="badge"><%= publication.get_upvotes.size %></span>
              </button>
            <% end %>
        <td><%= link_to dislike_publication_path(publication), class: "like", method: :put do %>
              <button type="button" class="btn btn-info" aria-label="Left Align">
                <span class="glyphicon glyphicon-thumbs-down glyphicon-align-center" aria-hidden="true"></span>
                <span class="badge"><%= publication.get_downvotes.size %></span>
              </button>
            <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Crear nueva', new_course_publication_path(@course) %>

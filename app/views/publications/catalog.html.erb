<div class="inner">

  <header class="major">
    <h1>Lista de todas las publicaciones</h1>
  </header>

  <div class="table-wrapper">

    <table class="alt">
      <thead>
        <tr>
          <th>Título</th>
          <th>Descripción</th>
          <th>Fecha de creación</th>
          <th>Creado por</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @publications.each do |publication| %>
          <tr>
            <td><%= publication.title %></td>
            <td><%= publication.description %></td>
            <td><%= publication.publication_date.strftime("%d/%m/%y: %H:%M:%S") %></td>
            <td><%= User.find(publication.created_by).email %></td>
            <td><%= link_to 'Mostrar', publication %></td>
            <td>
              <%= if (publication.created_by == current_user.id) || current_user.administrator? || @is_moderator
                link_to 'Editar', edit_publication_path(publication)
              end %>
            </td>
            <td>
              <%= if (publication.created_by == current_user.id) || current_user.administrator? || @is_moderator
                link_to 'Eliminar', publication, method: :delete, data: { confirm: '¿Estás seguro?' }
              end %>
            </td>
            <td>
              <ul class="actions">
                <li><%= link_to publication.get_upvotes.size, like_publication_path(publication), class: "button primary icon solid fa-thumbs-o-up", method: :put %></li>
                <li><%= link_to publication.get_downvotes.size, dislike_publication_path(publication), class: "button primary icon solid fa-thumbs-o-down", method: :put %></li>
              </ul>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

  </div>

</div>
